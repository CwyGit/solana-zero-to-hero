# 01-程序安全简介 - 安全第一！🔐

嘿，小伙伴！👋

![Program Security](/graphics/course-banners/program-security.png)

**每天都有数百万美元**以闪电般的速度通过Solana程序流转。在这种高风险、高性能的环境中，**一行存在漏洞的代码可能在几秒钟内耗尽协议**！

**比喻说明：** 就像银行金库，一个小疏忽可能导致巨大损失！

> 特别感谢[Unboxed Software](https://x.com/unboxedsoftware)为本课程提供指导！

---

## 🎯 为什么安全如此重要？

### 高风险环境

**现实情况：**
- ⚡ 每秒数千笔交易
- 💰 百万美元实时流转
- 🔓 **一个漏洞** = 全部资金损失

**小伙伴们要特别注意啦：**

> ⚠️ 在将程序部署到主网之前，你至少应该对安全基础知识有基本的了解！

---

## 🆚 Solana vs 以太坊安全

### 不同的威胁环境

**以太坊开发者担心：**
- Gas优化
- 顺序执行
- 智能合约漏洞

**Solana开发者必须掌握：**
- 账户所有权模型
- 并行执行风险
- 程序无状态特性
- CPI复杂性

**比喻：** 就像从单车道（以太坊）升级到多车道高速公路（Solana），规则完全不同！

---

## 📚 本课程内容

本课程基于[Coral的Sealevel攻击库](https://github.com/coral-xyz/sealevel-attacks)，包括：

✅ **所有Sealevel攻击**  
✅ **真实案例分析**  
✅ **实用的缓解策略**  

---

## 🔑 核心安全考量

### 1. 账户所有权模型

**关键点：** 程序必须仔细验证账户所有权！

---

### 2. 访问控制

**关键点：** 实施适当的权限检查！

---

### 3. CPI复杂性

**关键点：** 跨程序调用需要特别小心！

---

### 4. 无状态特性

**关键点：** 所有验证逻辑都必须明确实现！

**比喻：** 就像没有保安的大楼，你必须自己验证每个访客！

---

## ⚠️ 常见漏洞模式

### Top安全问题：

1. **缺少所有权检查** ❌
2. **签名者验证不足** ❌
3. **算术溢出/下溢** ❌
4. **账户初始化处理不当** ❌
5. **账户关闭处理不当** ❌

---

## 🛡️ Anchor的作用

**Anchor的设计目的：**

> 💡 通过强制开发者使用特定类型或做出明确选择，使Solana程序更加安全！

**但是：** 
- Anchor不是万能的
- 相同的漏洞对Native和Anchor都"有效"
- 你仍然需要理解底层原理

**比喻：** Anchor就像安全带，有用但不能替代安全驾驶！

---

## 📖 学习方式

**本课程特点：**
- ✅ 减少文字叙述
- ✅ 更多实用代码示例
- ✅ 深入实践性理解
- ✅ 真实案例分析

**每个漏洞看似"简单"，但都蕴含深刻讨论！**

---

## 🎯 学习目标

**完成本课程后，你将能够：**

1. ✓ 识别常见安全漏洞
2. ✓ 实施安全检查
3. ✓ 编写安全的Solana程序
4. ✓ 审计现有代码

---

## 💡 学习建议

### 本课程重点

**必须掌握：**
- 所有权检查
- 签名者验证
- 账户验证

**了解即可：**
- 高级攻击向量
- 复杂的CPI场景

---

## 🚀 准备好了吗？

**准备好提升你的Solana安全知识了吗？**

**让我们一起开始构建更安全的程序吧！** 🔐

**下一章：** 签名者检查 - 第一道防线！

---

**现在小伙伴们懂了吧？** 安全不是可选的，而是必须的！🔐

---

**最后更新**：2026年1月9日  
**制作人**：bruceCao  
**学习建议**：安全课程非常重要，建议仔细学习每一章！