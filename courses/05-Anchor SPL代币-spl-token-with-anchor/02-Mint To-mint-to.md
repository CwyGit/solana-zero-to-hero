# 02-Mint To指令 - 铸造代币！🪙

嘿，小伙伴！👋

**Mint To指令**的作用是：创建新代币并将其存入指定账户！

**权限要求：** 只有**铸造权限持有者**可以执行此操作！

**比喻说明：** 就像央行印钞票，只有央行（mint authority）能印！

---

## 🎯 前提条件

在我们铸造任何代币之前，我们需要已经完成以下操作：

### 1. 初始化Mint账户

✅ 初始化一个`Mint`账户，并持有`mintAuthority`

**为什么？** 没有Mint账户就没法mint！

---

### 2. 准备接收账户

✅ 初始化一个`Token`账户或`Associated Token`账户，用于接收铸造的代币

**为什么？** 代币要有地方存放！

**比喻：** 印钞票前要先准备金库！

---

## ⚠️ 小数位处理

**小伙伴们要特别注意啦：**

> 我们铸造的代币数量是根据小数位数进行"标准化"的！

**什么意思？**

如果我们想铸造1个具有6位小数的代币，我们实际上需要将金额设置为`1_000_000`！

**计算公式：**
```
实际数量 = 显示数量 × 10^小数位数
```

**举例：**
- 小数位：6
- 想铸造：1个代币
- 实际填：1,000,000（1_000_000）

**为什么这样设计？**

因为区块链不支持浮点数，所以用整数表示，然后通过小数位来"解释"！

**比喻：** 就像人民币，1元=100分，内部用"分"计算！

---

## 💻 代码示例

以下是CPI到`mint_to()`指令的示例：

```rust
mint_to(
    CpiContext::new(
        ctx.accounts.token_program.to_account_info(),
        MintTo {
            mint: ctx.accounts.mint_account.to_account_info(),
            to: ctx.accounts.to_token_account.to_account_info(),
            authority: ctx.accounts.authority.to_account_info(),
        },
    ),
    &1_000_000,
)?;
```

---

## 📖 代码解析

### CpiContext.new()

**作用：** 创建跨程序调用的上下文

**参数1：** `token_program` - SPL Token程序

---

### MintTo结构

**包含3个账户：**

1. **mint** - Mint账户（代币的"出生证明"）
2. **to** - 目标Token账户（接收代币的"口袋"）
3. **authority** - 权限账户（有权mint的人）

---

### 数量参数

**`&1_000_000`** - 要铸造的数量（已经按小数位标准化）

---

## ❓ 常见问题

### Q1: 如果我没有mint authority会怎样？

**答：** 交易会失败！

**错误信息：** 类似"Missing required signature"

---

### Q2: 可以mint到别人的账户吗？

**答：** 可以！只要你有mint authority，可以mint到任何Token账户！

**比喻：** 就像央行可以把钱发给任何银行账户！

---

### Q3: mint后供应量会变吗？

**答：** 会！Mint账户的`supply`字段会增加！

---

## 💡 学习建议

### 本章重点回顾

**必须掌握：**
1. ✓ Mint To的前提条件
2. ✓ 小数位的处理方式
3. ✓ CPI调用的基本结构

**了解即可：**
- CpiContext的底层实现

---

## 🎯 下一步

学完这一章，你应该：

- ✓ 理解Mint To的作用
- ✓ 知道如何处理小数位
- ✓ 能看懂Mint To的代码

**准备好了吗？** 下一章我们将学习**Transfer指令** - 如何转账代币！

---

**现在小伙伴们懂了吧？** Mint To就是"印钞票"的操作！🪙

---

**最后更新**：2026年1月9日  
**制作人**：bruceCao  
**学习建议**：小数位处理很重要，一定要理解！