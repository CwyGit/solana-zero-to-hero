# 闪电贷验证 - 检查你的实现！✅

嘿，小伙伴！👋

完成Anchor闪电贷挑战后，用这个验证清单检查你的实现！

**比喻说明：** 就像飞行前检查清单，确保万无一失！

---

## 🎯 挑战要求

利用课程中学到的知识，使用Anchor框架和指令内省构建一个闪电贷程序。

### 核心要求

**两个指令：**
1. ✅ **Borrow指令** - 借出资金
2. ✅ **Repay指令** - 偿还资金

---

## ✅ 验证清单

### 功能验证

**Borrow指令：**
- [ ] 成功借出指定数量的代币
- [ ] 验证后续有Repay指令
- [ ] 检查Repay指令的账户匹配
- [ ] 正确转移代币到借款人

**Repay指令：**
- [ ] 成功偿还借款+费用
- [ ] 验证之前有Borrow指令  
- [ ] 检查Borrow指令的账户匹配
- [ ] 正确转移代币回协议

---

### 指令内省验证

**关键检查：**
- [ ] 正确加载instructions sysvar
- [ ] 准确定位borrow/repay指令索引
- [ ] 验证指令程序ID匹配
- [ ] 验证指令账户正确

---

### 安全验证

**保护措施：**
- [ ] 防止未配对的borrow
- [ ] 防止未配对的repay
- [ ] 验证金额正确
- [ ] 检查账户所有权

---

### 测试验证

**测试用例：**
- [ ] 正常流程：borrow→使用→repay
- [ ] 只有borrow（应失败）
- [ ] 只有repay（应失败）
- [ ] 金额不匹配（应失败）
- [ ] 费用计算正确

---

## 🧪 提交测试

### 构建程序

```bash
anchor build
```

### 提交挑战

1. 点击`take challenge`按钮
2. 拖放`.so`文件
3. 通过所有测试
4. 领取NFT！

---

**全部通过？** 恭喜完成闪电贷挑战！⚡  
**你已掌握：** 指令内省的核心应用！

---

**最后更新**：2026年1月10日  
**制作风格**：莫式风格  
**基于：** 原始verify.mdx
