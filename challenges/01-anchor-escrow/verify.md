# 托管验证 - 检查你的实现！✅

嘿，小伙伴！👋

完成Anchor托管挑战后，用这个验证清单检查你的实现！

**比喻说明：** 就像考试答案核对，确保没有遗漏！

---

## 🎯 挑战要求

现在是时候检验您所学的内容了。利用课程中学到的知识，使用Anchor框架构建一个满足以下要求的托管程序：

**状态账户要求：**
> 您的状态账户应使用值为 `1` 的账户discriminator定义

---

## ✅ 三大挑战

### 挑战1：创建托管报价

**要求：**
- 允许创建者发起托管报价
- 使用值为 `0` 的指令discriminator

**验证：**
- [ ] 指令discriminator正确设置为0
- [ ] Escrow账户成功创建
- [ ] Vault创建并锁定代币
- [ ] 所有参数正确保存

---

### 挑战2：接受托管报价

**要求：**
- 允许接受者接受托管报价
- 使用值为 `1` 的指令discriminator

**验证：**
- [ ] 指令discriminator正确设置为1
- [ ] 双向转账成功（代币A和B）
- [ ] 账户正确关闭
- [ ] 租金返还给maker

---

### 挑战3：取消托管报价

**要求：**
- 允许创建者取消托管报价并退还托管资金
- 使用值为 `2` 的指令discriminator

**验证：**
- [ ] 指令discriminator正确设置为2
- [ ] 只有maker可以取消
- [ ] 代币返还给maker
- [ ] 账户正确关闭

---

## 📋 完整验证清单

### 状态验证
- [ ] Escrow使用discriminator = 1
- [ ] 所有字段正确定义
- [ ] 使用InitSpace宏

### 指令验证
- [ ] Make使用discriminator = 0
- [ ] Take使用discriminator = 1
- [ ] Refund使用discriminator = 2

### 功能验证
- [ ] 所有约束正确添加
- [ ] PDA派生正确
- [ ] CPI调用成功
- [ ] 错误处理完整

### 测试验证
- [ ] 正常流程测试通过
- [ ] 边界条件覆盖
- [ ] 错误情况处理

---

## 🧪 提交测试

完成实现后：

1. **构建程序**
```bash
anchor build
```

2. **生成.so文件**
- 文件位置：`target/deploy/*.so`

3. **提交挑战**
- 点击 `take challenge` 按钮
- 拖放.so文件
- 等待测试结果

---

**全部通过？** 恭喜完成Anchor托管挑战！🎉  
**获得奖励：** 领取您的NFT！

---

**最后更新**：2026年1月10日  
**制作风格**：莫式风格  
**基于：** 原始verify.mdx
